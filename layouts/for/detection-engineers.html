{{ define "main" }}
<section class="px-6 py-16 md:py-24">
  <div class="max-w-5xl mx-auto space-y-6 text-center">
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/10 text-xs font-semibold uppercase tracking-[0.12em] text-accent">
      {{ i18n "engineersBadge" | default "For Detection Engineers" }}
    </div>
    <h1 class="font-display text-4xl md:text-5xl font-semibold leading-tight">
      {{ i18n "engineersTitle" | default "Generate, test, and deploy detections as code" }}
    </h1>
    <p class="text-xl text-muted max-w-3xl mx-auto">
      {{ i18n "engineersDescription" | default "Get rules from our TI feed, generate with AI, or write your own. Test live on your SIEM. Deploy with approval and rollback. Full audit trail, so you see exactly what's happening." }}
    </p>
    <div class="flex flex-wrap justify-center gap-4 pt-4">
      <a
        class="inline-flex px-6 py-3 rounded-xl bg-gradient-to-r from-accent to-accent2 text-base font-semibold text-base/90 shadow-soft hover:scale-[1.01] transition"
        href="https://app.craftedsignal.io/"
        target="_blank"
        rel="noopener noreferrer"
      >
        {{ i18n "heroNewCtaTry" | default "Start free" }}
      </a>
      <a
        class="inline-flex px-6 py-3 rounded-xl border border-stroke text-base font-semibold text-text hover:border-accent/60 transition"
        href="mailto:founders@craftedsignal.io?subject=Detection%20pilot%20request&body=Share%20your%20SIEMs%2C%20team%20size%2C%20and%20target%202-week%20window."
      >
        {{ i18n "forCtaDesignPartner" | default "Join design partners" }}
      </a>
    </div>
  </div>
</section>

<!-- Rule Sources -->
<section class="px-6 py-14 md:py-20 bg-panel/40 border-y border-stroke">
  <div class="max-w-6xl mx-auto space-y-8">
    <div class="text-center space-y-4">
      <p class="text-xs font-semibold uppercase tracking-[0.14em] text-accent">
        {{ i18n "engineersSourcesLabel" | default "Rule sources" }}
      </p>
      <h2 class="font-display text-2xl md:text-3xl font-semibold">
        {{ i18n "engineersSourcesTitle" | default "Three ways to get detection rules" }}
      </h2>
    </div>

    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl border border-stroke bg-base/70 p-6 space-y-4">
        <h3 class="font-display text-xl font-semibold">{{ i18n "engineersSource1Title" | default "Threat intelligence feed" }}</h3>
        <p class="text-sm text-muted">{{ i18n "engineersSource1Desc" | default "Ready-to-use detections for trending and novel threats. Applicability filtering shows what's relevant to your environment." }}</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-6 space-y-4">
        <h3 class="font-display text-xl font-semibold">{{ i18n "engineersSource2Title" | default "AI-generated rules" }}</h3>
        <p class="text-sm text-muted">{{ i18n "engineersSource2Desc" | default "Describe what you want to detect. AI generates the rule and tests. Review, edit, and approve before anything ships." }}</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-6 space-y-4">
        <h3 class="font-display text-xl font-semibold">{{ i18n "engineersSource3Title" | default "Your own repository" }}</h3>
        <p class="text-sm text-muted">{{ i18n "engineersSource3Desc" | default "Bring your existing rules, use our standard rules repository, or start from scratch. Everything is detections as code." }}</p>
      </div>
    </div>
  </div>
</section>

<!-- Live Testing -->
<section class="px-6 py-14 md:py-20">
  <div class="max-w-6xl mx-auto">
    <div class="grid lg:grid-cols-2 gap-10 items-center">
      <div class="space-y-6">
        <p class="text-xs font-semibold uppercase tracking-[0.14em] text-accent">{{ i18n "engineersTestLabel" | default "Live testing" }}</p>
        <h2 class="font-display text-2xl md:text-3xl font-semibold">{{ i18n "engineersTestTitle" | default "Test detections on your actual SIEM" }}</h2>
        <p class="text-muted">{{ i18n "engineersTestDesc" | default "Define or generate tests, then run them live against your SIEM — in code with the CLI or in the web UI. See results before any rule reaches production." }}</p>

        <ul class="space-y-3">
          <li class="flex items-start gap-3">
            <svg class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="text-sm">{{ i18n "engineersTestBullet1" | default "Positive and negative test cases generated with every rule" }}</span>
          </li>
          <li class="flex items-start gap-3">
            <svg class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="text-sm">{{ i18n "engineersTestBullet2" | default "Run tests from the CLI or web UI — your workflow, your choice" }}</span>
          </li>
          <li class="flex items-start gap-3">
            <svg class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="text-sm">{{ i18n "engineersTestBullet3" | default "Quality, performance, and validity analysis with improvement suggestions" }}</span>
          </li>
        </ul>
      </div>

      <div class="rounded-2xl border border-stroke bg-base/90 overflow-hidden">
        <div class="px-4 py-2 border-b border-stroke bg-panel/60 flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-red-500/60"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-500/60"></span>
          <span class="w-3 h-3 rounded-full bg-green-500/60"></span>
          <span class="ml-2 text-xs text-muted font-mono">terminal</span>
        </div>
        <pre class="p-4 text-sm font-mono text-text overflow-x-auto"><code class="text-muted"># Validate rules locally</code>
<code class="text-accent">$</code> csctl validate
<code class="text-green-400">✓ 12 rules valid</code>

<code class="text-muted"># Preview what will change</code>
<code class="text-accent">$</code> csctl push -dry-run
<code class="text-green-400">+ webshell-upload-detection (new)</code>
<code class="text-yellow-400">~ lateral-movement-smb (modified)</code>

<code class="text-muted"># Push and deploy — tests run automatically</code>
<code class="text-accent">$</code> csctl push -deploy -m "Add webshell detection"
<code class="text-green-400">✓ 4/4 tests passed</code>
<code class="text-green-400">✓ Deployed to splunk · rollback available</code></pre>
      </div>
    </div>
  </div>
</section>

<!-- Reuse existing rules section for the code editor -->
{{- partial "sections/rules.html" . -}}

<!-- Final CTA -->
<section class="px-6 py-14 md:py-20 bg-panel/60 border-t border-stroke">
  <div class="max-w-3xl mx-auto text-center space-y-6">
    <h2 class="font-display text-2xl md:text-3xl font-semibold">
      {{ i18n "engineersCtaTitle" | default "Ready to ship detections like code?" }}
    </h2>
    <div class="flex flex-wrap justify-center gap-4">
      <a
        class="inline-flex px-6 py-3 rounded-xl bg-gradient-to-r from-accent to-accent2 text-base font-semibold text-base/90 shadow-soft hover:scale-[1.01] transition"
        href="https://app.craftedsignal.io/"
        target="_blank"
        rel="noopener noreferrer"
      >
        {{ i18n "engineersCtaTryFinal" | default "Start free" }}
      </a>
      <a
        class="inline-flex px-6 py-3 rounded-xl border border-stroke text-base font-semibold text-text hover:border-accent/60 transition"
        href="{{ .Site.Params.docsURL }}"
      >
        {{ i18n "engineersCtaDocsFinal" | default "Read the docs" }}
      </a>
    </div>
  </div>
</section>
{{ end }}
