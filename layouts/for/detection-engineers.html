{{ define "main" }}
<section class="px-6 py-16 md:py-24">
  <div class="max-w-5xl mx-auto space-y-6 text-center">
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/10 text-xs font-semibold uppercase tracking-[0.12em] text-accent">
      {{ i18n "engineersBadge" | default "For Detection Engineers" }}
    </div>
    <h1 class="font-display text-4xl md:text-5xl font-semibold leading-tight">
      {{ i18n "engineersTitle" | default "Generate, test, and deploy detections as code" }}
    </h1>
    <p class="text-xl text-muted max-w-3xl mx-auto">
      {{ i18n "engineersDescription" | default "Get rules from our TI feed, generate with AI, or write your own. Test live on your SIEM. Deploy with approval and rollback. Full audit trail, so you see exactly what's happening." }}
    </p>
    <div class="flex flex-wrap justify-center gap-4 pt-4">
      <a
        class="inline-flex px-6 py-3 rounded-xl bg-accent text-white font-semibold shadow-soft hover:scale-[1.01] transition"
        href="mailto:founders@craftedsignal.io?subject=Detection%20pilot%20request&body=Share%20your%20SIEMs%2C%20team%20size%2C%20and%20target%202-week%20window."
      >
        {{ i18n "forCtaDesignPartner" | default "Join design partners" }}
      </a>
      <a
        class="inline-flex px-6 py-3 rounded-xl border border-stroke font-semibold text-text hover:border-accent/60 transition"
        href="https://app.craftedsignal.io/"
        target="_blank"
        rel="noopener noreferrer"
      >
        {{ i18n "forCtaDemo" | default "View the demo" }}
      </a>
    </div>
  </div>
</section>

<!-- Rule Sources -->
<section class="px-6 py-14 md:py-20 bg-panel/40 border-y border-stroke">
  <div class="max-w-6xl mx-auto space-y-8">
    <div class="text-center space-y-4">
      <p class="text-xs font-semibold uppercase tracking-[0.14em] text-accent">
        {{ i18n "engineersSourcesLabel" | default "Rule sources" }}
      </p>
      <h2 class="font-display text-2xl md:text-3xl font-semibold">
        {{ i18n "engineersSourcesTitle" | default "Three ways to get detection rules" }}
      </h2>
    </div>

    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl border border-stroke bg-base/70 p-6 space-y-4">
        <h3 class="font-display text-xl font-semibold">{{ i18n "engineersSource1Title" | default "Threat intelligence feed" }}</h3>
        <p class="text-sm text-muted">{{ i18n "engineersSource1Desc" | default "Ready-to-use detections for trending and novel threats. Applicability filtering shows what's relevant to your environment." }}</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-6 space-y-4">
        <h3 class="font-display text-xl font-semibold">{{ i18n "engineersSource2Title" | default "AI-generated rules" }}</h3>
        <p class="text-sm text-muted">{{ i18n "engineersSource2Desc" | default "Describe what you want to detect. AI generates the rule and tests. Review, edit, and approve before anything ships." }}</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-6 space-y-4">
        <h3 class="font-display text-xl font-semibold">{{ i18n "engineersSource3Title" | default "Your own repository" }}</h3>
        <p class="text-sm text-muted">{{ i18n "engineersSource3Desc" | default "Bring your existing rules, use our standard rules repository, or start from scratch. Everything is detections as code." }}</p>
      </div>
    </div>
  </div>
</section>

<!-- Live Testing -->
<section class="px-6 py-14 md:py-20">
  <div class="max-w-6xl mx-auto">
    <div class="grid lg:grid-cols-2 gap-10 items-center">
      <div class="space-y-6">
        <p class="text-xs font-semibold uppercase tracking-[0.14em] text-accent">{{ i18n "engineersTestLabel" | default "Live testing" }}</p>
        <h2 class="font-display text-2xl md:text-3xl font-semibold">{{ i18n "engineersTestTitle" | default "Test detections on your actual SIEM" }}</h2>
        <p class="text-muted">{{ i18n "engineersTestDesc" | default "Define or generate tests, then run them live against your SIEM — in code with the CLI or in the web UI. See results before any rule reaches production." }}</p>

        <ul class="space-y-3">
          <li class="flex items-start gap-3">
            <svg aria-hidden="true" class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="text-sm">{{ i18n "engineersTestBullet1" | default "Positive and negative test cases generated with every rule" }}</span>
          </li>
          <li class="flex items-start gap-3">
            <svg aria-hidden="true" class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="text-sm">{{ i18n "engineersTestBullet2" | default "Run tests from the CLI or web UI — your workflow, your choice" }}</span>
          </li>
          <li class="flex items-start gap-3">
            <svg aria-hidden="true" class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span class="text-sm">{{ i18n "engineersTestBullet3" | default "Quality, performance, and validity analysis with improvement suggestions" }}</span>
          </li>
        </ul>
      </div>

      <div class="rounded-2xl border border-stroke bg-base/90 overflow-hidden">
        <div class="px-4 py-2 border-b border-stroke bg-panel/60 flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-red-500/60"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-500/60"></span>
          <span class="w-3 h-3 rounded-full bg-green-500/60"></span>
          <span class="ml-2 text-xs text-muted font-mono">terminal</span>
        </div>
        <pre class="p-4 text-sm font-mono text-text overflow-x-auto"><code class="text-muted"># Validate rules locally</code>
<code class="text-accent">$</code> csctl validate
<code class="text-green-400">✓ 12 rules valid</code>

<code class="text-muted"># Preview what will change</code>
<code class="text-accent">$</code> csctl push -dry-run
<code class="text-green-400">+ webshell-upload-detection (new)</code>
<code class="text-yellow-400">~ lateral-movement-smb (modified)</code>

<code class="text-muted"># Push and deploy — tests run automatically</code>
<code class="text-accent">$</code> csctl push -deploy -m "Add webshell detection"
<code class="text-green-400">✓ 4/4 tests passed</code>
<code class="text-green-400">✓ Deployed to splunk · rollback available</code></pre>
      </div>
    </div>
  </div>
</section>

<!-- Deployment Pipeline -->
<section class="px-6 py-14 md:py-20 bg-panel/40 border-y border-stroke">
  <div class="max-w-6xl mx-auto space-y-8">
    <div class="text-center space-y-4">
      <p class="text-xs font-semibold uppercase tracking-[0.14em] text-accent">Deployment pipeline</p>
      <h2 class="font-display text-2xl md:text-3xl font-semibold">From commit to production with guardrails at every step</h2>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-5 gap-4">
      <div class="rounded-2xl border border-stroke bg-base/70 p-5 space-y-2 text-center">
        <div class="w-10 h-10 mx-auto rounded-xl bg-accent/10 flex items-center justify-center">
          <svg aria-hidden="true" class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        </div>
        <h3 class="font-semibold text-sm">Validate</h3>
        <p class="text-xs text-muted">Syntax, schema, and query correctness checked locally and server-side</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-5 space-y-2 text-center">
        <div class="w-10 h-10 mx-auto rounded-xl bg-accent/10 flex items-center justify-center">
          <svg aria-hidden="true" class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg>
        </div>
        <h3 class="font-semibold text-sm">Test</h3>
        <p class="text-xs text-muted">Positive and negative tests run live against your SIEM before anything ships</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-5 space-y-2 text-center">
        <div class="w-10 h-10 mx-auto rounded-xl bg-accent/10 flex items-center justify-center">
          <svg aria-hidden="true" class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
        </div>
        <h3 class="font-semibold text-sm">Approve</h3>
        <p class="text-xs text-muted">Peer review with impact preview — projected alerts, noise, and cost delta</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-5 space-y-2 text-center">
        <div class="w-10 h-10 mx-auto rounded-xl bg-accent/10 flex items-center justify-center">
          <svg aria-hidden="true" class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/></svg>
        </div>
        <h3 class="font-semibold text-sm">Deploy</h3>
        <p class="text-xs text-muted">Push to your SIEM in monitoring mode first, then promote to active</p>
      </div>
      <div class="rounded-2xl border border-stroke bg-base/70 p-5 space-y-2 text-center">
        <div class="w-10 h-10 mx-auto rounded-xl bg-accent/10 flex items-center justify-center">
          <svg aria-hidden="true" class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
        </div>
        <h3 class="font-semibold text-sm">Monitor</h3>
        <p class="text-xs text-muted">Track noise ratio, alert volume, and health — rollback in one click if needed</p>
      </div>
    </div>

    <div class="rounded-2xl border border-stroke bg-base/90 overflow-hidden max-w-3xl mx-auto">
      <div class="px-4 py-2 border-b border-stroke bg-panel/60 flex items-center gap-2">
        <span class="w-3 h-3 rounded-full bg-red-500/60"></span>
        <span class="w-3 h-3 rounded-full bg-yellow-500/60"></span>
        <span class="w-3 h-3 rounded-full bg-green-500/60"></span>
        <span class="ml-2 text-xs text-muted font-mono">CI/CD pipeline</span>
      </div>
      <pre class="p-4 text-sm font-mono text-text overflow-x-auto"><code class="text-muted"># .github/workflows/detections.yml</code>
<code class="text-accent">$</code> csctl validate
<code class="text-green-400">✓ 14 rules valid, 0 warnings</code>

<code class="text-accent">$</code> csctl push -deploy -m "Sprint 42: webshell + kerberoasting"
<code class="text-white">  Running tests...</code>
<code class="text-green-400">  ✓ webshell-upload: 3/3 passed (2 positive, 1 negative)</code>
<code class="text-green-400">  ✓ kerberoasting:   4/4 passed (2 positive, 2 negative)</code>
<code class="text-white">  Submitting for approval...</code>
<code class="text-yellow-400">  ⏳ Waiting for approval (1 required)</code>
<code class="text-green-400">  ✓ Approved by alice@corp.com</code>
<code class="text-green-400">  ✓ Deployed to splunk (monitoring mode)</code>
<code class="text-green-400">  ✓ Deployed to sentinel (monitoring mode)</code></pre>
    </div>
  </div>
</section>

<!-- Multi-SIEM -->
<section class="px-6 py-14 md:py-20">
  <div class="max-w-6xl mx-auto">
    <div class="grid lg:grid-cols-2 gap-10 items-center">
      <div class="space-y-6">
        <p class="text-xs font-semibold uppercase tracking-[0.14em] text-accent">Multi-platform</p>
        <h2 class="font-display text-2xl md:text-3xl font-semibold">One rule, deployed to every SIEM</h2>
        <p class="text-muted">Write a detection once and deploy to Splunk, Sentinel, CrowdStrike, and Rapid7. CraftedSignal maintains platform-specific translations and shows diffs so you know exactly what ships.</p>
        <ul class="space-y-3">
          <li class="flex items-start gap-3">
            <svg aria-hidden="true" class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
            <span class="text-sm">Translation diffs before every deployment — review exactly what changes per platform</span>
          </li>
          <li class="flex items-start gap-3">
            <svg aria-hidden="true" class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
            <span class="text-sm">Portability scores flag rules that don't translate cleanly</span>
          </li>
          <li class="flex items-start gap-3">
            <svg aria-hidden="true" class="w-5 h-5 text-accent mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
            <span class="text-sm">Drift detection catches rules modified directly in the SIEM</span>
          </li>
        </ul>
      </div>

      <div class="rounded-2xl border border-stroke bg-base/90 overflow-hidden">
        <div class="px-4 py-2 border-b border-stroke bg-panel/60 flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-red-500/60"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-500/60"></span>
          <span class="w-3 h-3 rounded-full bg-green-500/60"></span>
          <span class="ml-2 text-xs text-muted font-mono">csctl diff</span>
        </div>
        <pre class="p-4 text-sm font-mono text-text overflow-x-auto"><code class="text-accent">$</code> csctl diff
<code class="text-white font-semibold">webshell-upload-detection</code>

<code class="text-muted">  splunk (SPL):</code>
<code class="text-green-400">  + | where uri_path LIKE "%/uploads/%.php"</code>
<code class="text-green-400">  + | stats count by src_ip, uri_path</code>

<code class="text-muted">  sentinel (KQL):</code>
<code class="text-green-400">  + | where csUriStem contains "/uploads/"</code>
<code class="text-green-400">  + | summarize count() by cIP, csUriStem</code>

<code class="text-muted">  crowdstrike:</code>
<code class="text-yellow-400">  ~ Custom IOA rule group updated</code>

<code class="text-white">Portability: </code><code class="text-green-400">92%</code><code class="text-muted"> (all platforms supported)</code></pre>
      </div>
    </div>
  </div>
</section>

<!-- Reuse existing rules section for the code editor -->
{{- partial "sections/rules.html" . -}}

{{- partial "sections/for-footer.html" . -}}

<!-- Final CTA -->
<section class="px-6 py-14 md:py-20">
  <div class="max-w-3xl mx-auto text-center space-y-6">
    <h2 class="font-display text-2xl md:text-3xl font-semibold">
      {{ i18n "engineersCtaTitle" | default "Ready to ship detections like code?" }}
    </h2>
    <div class="flex flex-wrap justify-center gap-4">
      <a
        class="inline-flex px-6 py-3 rounded-xl bg-accent text-white font-semibold shadow-soft hover:scale-[1.01] transition"
        href="mailto:founders@craftedsignal.io?subject=Detection%20pilot%20request&body=Share%20your%20SIEMs%2C%20team%20size%2C%20and%20target%202-week%20window."
      >
        {{ i18n "engineersCtaTryFinal" | default "Start free" }}
      </a>
      <a
        class="inline-flex px-6 py-3 rounded-xl border border-stroke font-semibold text-text hover:border-accent/60 transition"
        href="{{ .Site.Params.docsURL }}"
      >
        {{ i18n "engineersCtaDocsFinal" | default "Read the docs" }}
      </a>
    </div>
  </div>
</section>
{{ end }}
